BEGIN: 
	LXI B,411BH ; DELAY=0.2 SEC
       MVI E,4BH   ; E= 75 FOR 15 SEC DELAY
	MVI A,00H
       MVI H,00H

 	CALL CHECK_LSB    ; CHECK FOR LSB
	JC BEGIN          ; IF LSB IS ON REPEAT

LABEL1:
	CALL CHECK_LSB    ; IF LSB IS OFF THEN REPEAT
	JNC LABEL1

LABEL2:
	CALL CHECK_LSB    ; IF LSB IS ON THEN REPEAT
	JC LABEL2

; WHEN DIP SWITCH LSB IS OFF

INMOVE:
	CPI 04H   ; IF A>=4 CHANGE EXIT
	JC INNEXT ; ELSE MOVE TO FLAG INNEXT 
	CALL CHANGE

INNEXT:
	CALL EXIT
	CALL CHECK_LSB ; CHECK FOR LSB
	JC MOVE1       ; IF LSB IS ON MOVE TO FLAG MOVE1
	DCR E
	JZ END15
	JMP INMOVE

; WHEN DIP SWITCH LSB IS ON

MOVE1: 
	CPI 04H       ; IF A>=4 CHANGE EXIT
	JC NEXT1      ; ELSE CHANGE EXIT
	CALL CHANGE

NEXT1: 
	CALL EXIT
	CALL CHECK_LSB ; CHECK FOR LSB
	JC NEXT2       ; IF LSB IS ON MOVE TO FLAG NEXT2
	MVI E,4BH
	JMP MOVE1

NEXT2:
	DCR E
	JZ END15
	JMP MOVE1

; END OF 15 SEC

END15:
	MVI E,4BH
	MVI A,FFH
	STA 3000H
	MVI A,00H
	MVI H,00H
	CALL CHECK_LSB
	JC LABEL2
	JMP LABEL1

; SUBROUTINE DELAY (PAGE 69)- DELAY: 12(BC-1) + 15.5 ÏSEC 

DELAY:           
	DCX B   ; 6 STATES
	MOV A,B ; 4 STATES
	ORA C   ; 4 STATES
	JNZ DELAY ; 7/10 STATES
	RET       ; 10 STATES

; SUBROUTINE CHECK DIP SWITCH LSB

CHECK_LSB:
	MOV D,A
	LDA 2000H
	RAR       ; IF LSB IS ON THEN CY=1 ELSE CY=0
	MOV A,D
	RET

; SUBROUTINE LED LIGHT SWITCH

CHANGE:
	MOV A,H ; CHANGE EXIT 
	CMA
	MOV H,A
	MVI A,00H
	RET

; SUBROUTINE EXIT

EXIT:
	MOV D,A
	MOV A,H
	STA 3000H
	CALL DELAY ; DELAY PROCESS
	MOV A,D
	INR A
	RET

END














































